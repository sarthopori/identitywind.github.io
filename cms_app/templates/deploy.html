{% extends "base.html" %}
{% set title = "Deploy Website" %}

{% block content %}
    <h1>Deploy Website</h1>
    <p>Clicking the button below will perform the following actions:</p>
    <ol class="deploy-steps">
        <li>Run the <strong>build.py</strong> script to generate your static website.</li>
        <li>Run <strong>git add .</strong> to stage all changes.</li>
        <li>Run <strong>git commit</strong> to save the changes.</li>
        <li>Run <strong>git push</strong> to upload the changes to GitHub and make your site live.</li>
    </ol>
    
    <form method="post" onsubmit="this.querySelector('button').disabled = true; this.querySelector('button').textContent = 'Deploying...';">
        <label for="commit_message">Commit Message (A brief description of your changes):</label>
        <input type="text" name="commit_message" value="Updated website content" required>
        <button type="submit" class="deploy-button">Build and Deploy Website</button>
    </form>
    
    {% if output %}
    <h2 class="list-heading">Deployment Output:</h2>
    <pre class="output-log">{{ output }}</pre>
    {% endif %}
{% endblock %}