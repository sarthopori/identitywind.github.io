{% extends "base.html" %}
{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="cms-container">
    <h2>{{ title }}</h2>

    <form method="POST" enctype="multipart/form-data" action="{{ url_for('add_testimonial') if not testimonial else url_for('edit_testimonial', item_id=testimonial_id) }}">
        
        <div class="form-group">
            <label for="feedback">Feedback / Review:</label>
            <textarea id="feedback" name="feedback" rows="4" required>{{ testimonial.feedback if testimonial else '' }}</textarea>
        </div>

        <div class="form-group">
            <label for="stars">Star Rating (1-5):</label>
            <input type="number" id="stars" name="stars" min="1" max="5" value="{{ testimonial.stars if testimonial else 5 }}" required>
        </div>

        <div class="form-group">
            <label for="client_name">Client's Name:</label>
            <input type="text" id="client_name" name="client_name" value="{{ testimonial.client_name if testimonial else '' }}" required>
        </div>

        <div class="form-group">
            <label for="client_company">Client's Company / Title:</label>
            <input type="text" id="client_company" name="client_company" value="{{ testimonial.client_company if testimonial else '' }}" required>
        </div>

        <div class="form-group">
            <label for="image">Client's Photo:</label>
            <input type="file" id="image" name="image" accept="image/*">
            {% if testimonial and testimonial.image %}
                <p style="margin-top:10px;">
                    Current Photo: <br>
                    <img src="{{ url_for('serve_content_image', filename='team/' + testimonial.image) }}" alt="Current Client Photo" style="max-width: 100px; height: 100px; object-fit: cover; border-radius: 50%; margin-top: 5px; display: block; border: 1px solid #ddd;">
                    <small>Filename: {{ testimonial.image }}</small>
                </p>
            {% endif %}
            <small>Upload a new image to replace the current one. This image will be stored in the 'team' images folder.</small>
        </div>

        <button type="submit" class="btn-submit">Save Testimonial</button>
        <a href="{{ url_for('manage_testimonials') }}" class="btn-cancel">Cancel</a>
    </form>
</div>
{% endblock %}