{% extends "base.html" %}
{% block title %}Manage Team{% endblock %}
{% block page_actions %}
    <!-- The add form is on the page, so no button is needed here -->
{% endblock %}
{% block content %}
<div class="card">
    <div class="card-header"><h2>Add New Member</h2></div>
    <div class="card-body">
        <form method="post" action="{{ url_for('add_team_member') }}" enctype="multipart/form-data">
            <div class="form-group"><label for="name">Name:</label><input type="text" name="name" required></div>
            <div class="form-group"><label for="title">Title:</label><input type="text" name="title" required></div>
            <div class="form-group"><label for="bio">Biography (Optional):</label><textarea name="bio" rows="4"></textarea></div>
            <div class="form-group"><label for="image">Photo:</label><input type="file" name="image" accept="image/*" required></div>
            <div class="form-group"><label style="display:inline-flex; align-items:center;"><input type="checkbox" name="is_ceo" value="true" style="width:auto; margin-right:10px;"> Is this person the CEO?</label></div>
            <div style="text-align: right;"><button type="submit" class="btn btn-primary">Add Team Member</button></div>
        </form>
    </div>
</div>
<div class="grid">
    {% for member in team|reverse %}
    <div class="card">
        <div class="card-body">
            <img src="{{ url_for('serve_content_image', filename='team/' + member.image) if member.image else 'https://via.placeholder.com/80' }}" alt="{{ member.name }}" class="grid-item-image rounded">
            <div class="card-content">
                <h3 style="margin: 0 0 5px 0;">{{ member.name }}</h3>
                <p style="margin: 0; color: var(--text-secondary);">{{ member.title }}</p>
                {% if member.is_ceo %}<span style="color: var(--accent-color); font-weight: 500; font-size: 0.8rem;">CEO</span>{% endif %}
            </div>
        </div>
        <div class="card-footer">
            <a href="{{ url_for('edit_team_member', item_id=loop.revindex0) }}" class="btn btn-secondary">Edit</a>
            <form method="post" action="{{ url_for('delete_team_member', item_id=loop.revindex0) }}" onsubmit="return confirm('Delete this member?');" style="display:inline; margin-left: 0.5rem;">
                <button type="submit" class="btn btn-danger">Delete</button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}